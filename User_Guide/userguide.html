<!doctype html>
<html class="no-js" lang="en" data-content_root="../">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="../genindex.html" /><link rel="search" title="Search" href="../search.html" /><link rel="next" title="SVInsight" href="../apiref/apiref.html" /><link rel="prev" title="Papers" href="../Background/paper.html" />

    <!-- Generated with Sphinx 8.1.3 and Furo 2024.08.06 -->
        <title>User Guide - SVInsight documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?v=354aac6f" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?v=302659d7" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">SVInsight  documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../index.html">
  
  
  <span class="sidebar-brand-text">SVInsight  documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul>
<li class="toctree-l1"><a class="reference internal" href="../Getting_Started/install.html">Install</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Getting_Started/quickstart.html">Getting Started</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Background/background.html">Background</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Background/understanding.html">Understanding Iterative Factor Analysis Results</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Background/paper.html">Papers</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">User Guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../apiref/apiref.html">SVInsight</a></li>
<li class="toctree-l1"><a class="reference internal" href="../apiref/license.html">License</a></li>
</ul>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../Examples/examples.html">Examples</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of Examples</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../Examples/SVInsight_example_SETx.html">SVInsight Example: Southeast Texas</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Contributions/contributions.html">Issues, Questions, and Contributions</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Acknowledgements/acknowledgements.html">Acknowledgements</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="../_sources/User_Guide/userguide.rst.txt" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div>
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="user-guide">
<h1>User Guide<a class="headerlink" href="#user-guide" title="Link to this heading">¶</a></h1>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Link to this heading">¶</a></h2>
<p>The basic workflow of <cite>SVInsight</cite> works as follows:</p>
<ol class="arabic simple">
<li><p>Initialize the project class (<code class="xref py py-obj docutils literal notranslate"><span class="pre">SVInsight</span></code>) with your project name, folder path, Census API key, and your study area.</p></li>
<li><p>Define the initial project configuration variables with a boundary (tract or block groups) and year.</p></li>
<li><p>Extract the necessary boundary geopackage using <code class="xref py py-meth docutils literal notranslate"><span class="pre">SVInsight.boundaries_data()</span></code>.</p></li>
<li><p>Extract the raw census data and fill in holes in the data using <code class="xref py py-meth docutils literal notranslate"><span class="pre">SVInsight.census_data()</span></code>.</p></li>
<li><p>Configure the run and calculate the SVI using <code class="xref py py-meth docutils literal notranslate"><span class="pre">SVInsight.configure_variables()</span></code> and <code class="xref py py-meth docutils literal notranslate"><span class="pre">SVInsight.calculate_svi()</span></code>.</p></li>
</ol>
<p>Below you will find the detailed user guide that walks through each of these steps, with additional options for project customization. <cite>SVInsight</cite> is supposed to be a flexible and exploratory estimator of various social vulnerability indices, and is therefore highly customizable within the framework of Factor Analysis and Rank Method methodologies. The User Guide below walks through the methods available for calculating SVIs. For a larger discussion on the Factor Analysis and Rank Method methodologies, please refer to the <a class="reference internal" href="../Background/background.html"><span class="doc">Background</span></a> and  <a class="reference internal" href="../Background/understanding.html"><span class="doc">Understanding Iterative Factor Analysis Results</span></a> pages.</p>
</section>
<section id="initializing-the-project">
<h2>1. Initializing the Project<a class="headerlink" href="#initializing-the-project" title="Link to this heading">¶</a></h2>
<p>The first step to the project is importing <code class="xref py py-obj docutils literal notranslate"><span class="pre">SVInsight</span></code> and setting the project <cite>params.</cite> Each instance of the class can be seen as a standalone project for the input geoids, where users can configure different runs based on years, boundaries, and variables of interest. In this User Guide we are using Travis_County, Texas as a working example.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">svinsight</span> <span class="kn">import</span> <span class="n">SVInsight</span> <span class="k">as</span> <span class="n">svi</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">project_name</span> <span class="o">=</span> <span class="s1">&#39;Travis_County&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">file_path</span> <span class="o">=</span> <span class="s2">&quot;/User/Documents&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">api_key</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;API_KEY&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">geoids</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;48453&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">proj</span> <span class="o">=</span> <span class="n">svi</span><span class="p">(</span><span class="n">project_name</span><span class="p">,</span> <span class="n">file_path</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">geoids</span><span class="p">)</span>
</pre></div>
</div>
<p>These variables create the instance of a project. Each have the following purpose:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">project_name</span></code>: This is the name of your project. In this case, it’s ‘Travis_County’. The project name is used when saving files throughout the project.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">file_path</span></code>: This is the path to the parent folder where your project files will be stored. Creating the SVInsight object automatically creates the necessary file structure needed for your project based on the <code class="docutils literal notranslate"><span class="pre">file_path</span></code> and <code class="docutils literal notranslate"><span class="pre">project_name</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">api_key</span></code>: This is your Census API key. You can obtain an API key from the <a class="reference external" href="https://www.census.gov/data/developers/data-sets.html">Census Bureau’s developer page</a>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geoids</span></code>: This is a list of geographic identifiers for the areas you’re interested in. In this case, it’s [‘48453’], which represents Travis County, Texas. The necessary geographic identifiers for your state or county of interest can be obtained from this <a class="reference external" href="https://transition.fcc.gov/oet/info/maps/census/fips/fips.txt">FCC page</a>.</p></li>
</ul>
<p>During the initialization, a series of folder is generated for storing the files created during a project. The folder locations and their intended contents are as follows:</p>
<ul class="simple">
<li><p><strong>Boundaries:</strong> Will contain geopackages of the boundary areas based on the input geoids.</p></li>
<li><p><strong>Data:</strong> Where the raw census data csv and geopackages will be stored, in addition to other csv files that contain information about missing variables and how they were rectified.</p></li>
<li><p><strong>Documentation:</strong> Will contain excel sheets of information pertinent to the factor analysis svi.</p></li>
<li><p><strong>SVIs:</strong> Where the geopackages of SVIs will be stored.</p></li>
<li><p><strong>Variables:</strong> Where the configuration files will be stored.</p></li>
</ul>
</section>
<section id="defining-the-initial-project-configuration-variables">
<h2>2. Defining the Initial Project Configuration Variables<a class="headerlink" href="#defining-the-initial-project-configuration-variables" title="Link to this heading">¶</a></h2>
<p>The initial project configuration variables allows us to pull the appropriate boundary information. The boundary can be either <cite>bg</cite> or <cite>tract</cite> for block group or tract. Block groups and tracts are the two highest spatial resolutions that the US Census releases American Community Survey 5-Year estimates for. While block groups have a higher spatial resolution, they come with greater uncertainty in their estimates compared to tracts. More information can be found on the <a class="reference external" href="https://www.census.gov/data/developers/data-sets/acs-5year.html">Census website</a>.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">boundary</span><span class="o">=</span><span class="s1">&#39;bg&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">year</span><span class="o">=</span><span class="mi">2017</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config_file</span> <span class="o">=</span> <span class="s1">&#39;config&#39;</span>
</pre></div>
</div>
<figure class="align-default" id="id1">
<a class="reference internal image-reference" href="../_images/census_divisions.jpeg"><img alt="Map showing the Census Divisions" src="../_images/census_divisions.jpeg" style="width: 580.0px; height: 578.0px;" />
</a>
<figcaption>
<p><span class="caption-text">Visual representation of the different Census boundaries.</span><a class="headerlink" href="#id1" title="Link to this image">¶</a></p>
</figcaption>
</figure>
</section>
<section id="extracting-the-boundary">
<h2>3. Extracting the Boundary<a class="headerlink" href="#extracting-the-boundary" title="Link to this heading">¶</a></h2>
<p>With the boundary and year set, we can extract the necessary raw census data. In the <code class="xref py py-meth docutils literal notranslate"><span class="pre">SVInsight.boundaries_data()</span></code> method, there is a parameter <code class="docutils literal notranslate"><span class="pre">overwrite</span></code> which can be set to True or False. When True, if an existing geopackage for the given boundary and year is already found in the folder it will be overwritten. this method returns a geopandas dataframe. Furthermore, because Census boundaries include areas that may not have permanent populations (i.e., military installations, airports, national parks, etc.), a filter is automatically applied such that boundaries with less than a population of 75 are excluded from the analysis.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">areas</span> <span class="o">=</span> <span class="n">proj</span><span class="o">.</span><span class="n">boundaries_data</span><span class="p">(</span><span class="n">boundary</span><span class="p">,</span> <span class="n">year</span><span class="p">,</span> <span class="n">overwrite</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="extract-raw-data-and-filling-holes">
<h2>4. Extract Raw Data and Filling Holes<a class="headerlink" href="#extract-raw-data-and-filling-holes" title="Link to this heading">¶</a></h2>
<p>The next step is to extract the raw census data using the <code class="xref py py-meth docutils literal notranslate"><span class="pre">SVInsight.census_data()</span></code> method. <code class="xref py py-obj docutils literal notranslate"><span class="pre">SVInsight</span></code> starts has a default set of 27 social and economic variables of interest, which are detailed in the <a class="reference internal" href="../Background/background.html#variables"><span class="std std-ref">Variables</span></a> section. This method specifically pulls the raw data, and the variables themselves are calculated later. In this example, we are continuing to us the same boundary and year as the boundaries we just extracted, in order to produce a geopackaged version of raw data. Furthermore we have two additional parameters: <code class="docutils literal notranslate"><span class="pre">interpolate</span></code> and <code class="docutils literal notranslate"><span class="pre">verbose</span></code>. <strong>It is important to note</strong> that the Census API will sometimes time out, and if Census data isn’t being pulled, waiting a few seconds/minutes and re-running usually solves the problem.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">areas</span> <span class="o">=</span> <span class="n">proj</span><span class="o">.</span><span class="n">census_data</span><span class="p">(</span><span class="n">boundary</span><span class="p">,</span> <span class="n">year</span><span class="p">,</span> <span class="n">interpolate</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">overwrite</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">interpolate</span></code> (bool): Census data, especially at the block group level, might have missing data points. Missing data can occur if there are not enough sample points in a given time period to accurately calculate the variable. In these instances, the holes must be filled to accurately calculate the SVIs. <code class="xref py py-obj docutils literal notranslate"><span class="pre">SVInsight</span></code> can accomplish this two different ways, either with or without <strong>interpolation</strong>. When interpolation is True, missing values are determined by recalculating the median based on the detailed tables (e.g., the breakdown table of response ranges for a given variable) from the adjacent boundaries. Because interpolating isn’t exact, any boundary that has less than 40 neighboring data points are not interpolated. For areas that are not interpolated, or if interpolation is set to False, holes are filled by taking the next available boundary value. For example, if a block group is missing a value it is replaced with the tract value, and if a tract value is missing it is filled with the county value.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">verbose</span></code> (bool): When set to True, two additional csv values are saved in the Data folder that highlight which locations had holes that needed to be filled and the methodology in which it is filled (_missing_values.csv). If there happens to be an entire column that is missing information, the next highest available boundary is used to fill the entire variable (_missing_columns.csv).</p></li>
</ul>
<p>Similar to the <code class="xref py py-meth docutils literal notranslate"><span class="pre">SVInsight.boundaries_data()</span></code> method, there is an overwrite parameter as well.</p>
</section>
<section id="configuring-and-calculating-svi">
<h2>5. Configuring and Calculating SVI<a class="headerlink" href="#configuring-and-calculating-svi" title="Link to this heading">¶</a></h2>
<p>Finally, the <code class="xref py py-meth docutils literal notranslate"><span class="pre">SVInsight.configure_variables()</span></code> and <code class="xref py py-meth docutils literal notranslate"><span class="pre">SVInsight.calculate_svi()</span></code> methods are used to configure and run the SVI calculation.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">proj</span><span class="o">.</span><span class="n">configure_variables</span><span class="p">(</span><span class="n">config_file</span><span class="p">,</span> <span class="n">exclude</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">include</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">inverse_vars</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;PERCAP&#39;</span><span class="p">,</span> <span class="s1">&#39;QRICH&#39;</span><span class="p">,</span> <span class="s1">&#39;MDHSEVAL&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">proj</span><span class="o">.</span><span class="n">calculate_svi</span><span class="p">(</span><span class="n">config_file</span><span class="p">,</span> <span class="n">boundary</span><span class="p">,</span> <span class="n">year</span><span class="p">)</span>
</pre></div>
</div>
<section id="configure-variables">
<h3>Configure Variables<a class="headerlink" href="#configure-variables" title="Link to this heading">¶</a></h3>
<p>This method prepares the information that will be included in the SVI calculation. This method is useful if you are interested in creating multiple different scenarios of SVI. For example, in some runs you may be interested in all 27 variables, while in others you may only want to include economic related variables. By creating a configuration file for each type of run, each SVI will be saved with the config_name associated with it for easier access and comparison. There are four main parameters of the <code class="xref py py-meth docutils literal notranslate"><span class="pre">SVInsight.configure_variables()</span></code> method:</p>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">config_file</span></code> (str): The name given to the configuration file</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">exclude</span></code> (list): In order to remove a variable from the original list of 27, this parameter accepts a list of variables the user would like to exclude from the configuration.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">include</span></code> (list): the opposite of exclude, in that this parameter will remove all variables except those in this list. An exclude and an include parameter value cannot be given.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">inverse_vars</span></code> (list): Certain variables have an inverse relationship with vulnerability. For example, household with a higher per capita income, make over $250,000 annually, and/or have a higher median housing value are less vulnerable. The list of variables passed to inverse_vars are flipped to capture these dynamics. This parameter defaults to this list of three variables, and users can feel free to pass their own list of variables that they believe to be inversely related.</p></li>
</ol>
</section>
<section id="calculate-svi">
<h3>Calculate  SVI<a class="headerlink" href="#calculate-svi" title="Link to this heading">¶</a></h3>
<p>With the configuration file set, the final SVI can be calculated. The output geopackage and CSV files will have each variable that is within the configuration file as well as the following SVI variables:</p>
<ul class="simple">
<li><p>FA_SVI_Unscaled: The factor analysis method SVI estimate that is unscaled</p></li>
<li><p>FA_SVI_Scaled: The factor analysis method SVI estimate that is scaled 0 to 1</p></li>
<li><p>FA_SVI_Percentile: The factor analysis method SVI estimate percentile</p></li>
<li><p>FA_SVI_Rank: The factor analysis method SVI estimate rank</p></li>
<li><p>RM_SVI_Percentile: The rank method SVI estimate percentile</p></li>
<li><p>RM_SVI_Rank: The rank method SVI estimate rank</p></li>
</ul>
<p>It is important to remember that <strong>SVI estimates are exploratory and relative.</strong> That means that SVI values’ accuracy is dependent on the configuration of the run for a given location and only relative to within that study area.</p>
</section>
</section>
<section id="examine-variables">
<h2>6. Examine Variables<a class="headerlink" href="#examine-variables" title="Link to this heading">¶</a></h2>
<p>An additional method to investigate variables is the <code class="xref py py-meth docutils literal notranslate"><span class="pre">SVInsight.var_descriptions()</span></code> method. Given a list of variables, the description can be printed. Similarly, users can access the variables based on the instance of the project to see the long description as well as the raw census variables that make up the numerator and denominator of the variable. Both methods below will print similar information.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">proj</span><span class="o">.</span><span class="n">all_vars_eqs</span><span class="p">[</span><span class="s1">&#39;MEDAGE&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">proj</span><span class="o">.</span><span class="n">var_descriptions</span><span class="p">([</span><span class="s1">&#39;MEDAGE&#39;</span><span class="p">])</span>
</pre></div>
</div>
</section>
<section id="customizing-variables">
<h2>7. Customizing Variables<a class="headerlink" href="#customizing-variables" title="Link to this heading">¶</a></h2>
<p>Users can also define their own variables using the <code class="xref py py-meth docutils literal notranslate"><span class="pre">SVInsight.var_descriptions()</span></code> method. If a user is interested in defining an additional variable this would need to be run before the configuration file is produced, which would automatically include the new variable in the calculated SVI (unless placed on the excluded list).</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">proj</span><span class="o">.</span><span class="n">add_variable</span><span class="p">(</span><span class="n">boundary</span><span class="p">,</span> <span class="n">year</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">num</span><span class="p">,</span> <span class="n">den</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">description</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span>
</pre></div>
</div>
<p>The method’s parameters are as follows (boundary and year the same as before):</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">name</span></code> (str): the abbreviated name of the variable</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">num</span></code> (list): the list of Census raw data variables that make up the sum of the numerator</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">den</span></code> (list): the list of Census raw data variables that make up the sum of the denominator</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">description</span></code> (str): An option string description of what the variable is</p></li>
</ul>
</section>
<section id="plotting">
<h2>8. Plotting<a class="headerlink" href="#plotting" title="Link to this heading">¶</a></h2>
<p>There is also a simple plotting method, <code class="xref py py-meth docutils literal notranslate"><span class="pre">SVInsight.plot_svi()</span></code>, to quickly plot a few example plots. There are three options for plotting:</p>
<section id="plot-option-1-single-percentile">
<h3>Plot option 1: Single percentile<a class="headerlink" href="#plot-option-1-single-percentile" title="Link to this heading">¶</a></h3>
<p>With plot_option equal to 1, a single SVI will be plotted based on a given year, boundary, configuration file, and variable name. While the variable name can be any existing variable within the geopackage, it will automatically default to plotting as a percentile because of the relative nature of the SVI calculation and it is <strong>most appropriate to analyze calculated SVIs in terms of their rank/percentile.</strong></p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">geopackages</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2017</span><span class="p">,</span> <span class="n">boundary</span><span class="p">,</span> <span class="n">config_file</span><span class="p">,</span> <span class="s1">&#39;FA_SVI_Percentile&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">figure</span> <span class="o">=</span> <span class="n">proj</span><span class="o">.</span><span class="n">plot_svi</span><span class="p">(</span><span class="n">plot_option</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">geopackages</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<figure class="align-default" id="id2">
<a class="reference internal image-reference" href="../_images/single_plot.png"><img alt="Map showing SVI for 2017 Travis County" src="../_images/single_plot.png" style="width: 450.0px; height: 450.0px;" />
</a>
<figcaption>
<p><span class="caption-text">2017 Block Group Social Vulnerability Estimate for Travis County using Factor Analysis method</span><a class="headerlink" href="#id2" title="Link to this image">¶</a></p>
</figcaption>
</figure>
</section>
<section id="plot-option-2-double-percentile">
<h3>Plot option 2: Double percentile<a class="headerlink" href="#plot-option-2-double-percentile" title="Link to this heading">¶</a></h3>
<p>With plot_option equal to 2, two different SVIs can be plotted next to each other for a visual comparison. These could be from the same geopackage comparing the factor analysis and rank methods, or two different configurations, two different boundaries, etc. The geopackages input should be a nested list in the same format as plot_option 1.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">geopackages</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">2017</span><span class="p">,</span> <span class="n">boundary</span><span class="p">,</span> <span class="n">config_file</span><span class="p">,</span> <span class="s1">&#39;FA_SVI_Percentile&#39;</span><span class="p">],</span> <span class="p">[</span><span class="mi">2018</span><span class="p">,</span> <span class="n">boundary</span><span class="p">,</span> <span class="n">config_file</span><span class="p">,</span> <span class="s1">&#39;FA_SVI_Percentile&#39;</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">figure</span> <span class="o">=</span> <span class="n">proj</span><span class="o">.</span><span class="n">plot_svi</span><span class="p">(</span><span class="n">plot_option</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">geopackages</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<figure class="align-default" id="id3">
<a class="reference internal image-reference" href="../_images/double_plot.png"><img alt="Map showing SVI for 2017 and 2018 Travis County" src="../_images/double_plot.png" style="width: 900.0px; height: 450.0px;" />
</a>
<figcaption>
<p><span class="caption-text">2017 and 2018 Block Group Social Vulnerability Estimate for Travis County using Factor Analysis method</span><a class="headerlink" href="#id3" title="Link to this image">¶</a></p>
</figcaption>
</figure>
</section>
<section id="plot-option-3-full-comparison">
<h3>Plot option 3: Full comparison<a class="headerlink" href="#plot-option-3-full-comparison" title="Link to this heading">¶</a></h3>
<p>When plot_option is equal to 3, a more detailed comparison is calculated that will produce a difference plot and calculate a linear regression. Because the difference map and linear regression require the same set of input geoids (i.e., the same locations in the geopackage), it is currently required that the variables come from the same geopackage, and its intended purpose is to therefore compare the differences between the Factor Analysis and Rank Method methodologies that have the same configuration. The geopackages input should be formatted as follows: [year, boundary, config]. If a variable option is passed it is ignored. The additional plots show the following information:</p>
<ul class="simple">
<li><p>Difference plot: Shows the The FA_SVI_Rank minus the RM_SVI_Rank to highlight areas where the factor analysis method is under (negative) and over (positive) predicting SVI rank when compared to the rank method.</p></li>
<li><p>Linear Regression: Shows linear correlation between factor analysis and rank method SVI estimates and automatically computes an r-squared value with p-value, 95% confidence interval, and 95% prediction interval.</p></li>
</ul>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">geopackages</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2018</span><span class="p">,</span> <span class="n">boundary</span><span class="p">,</span> <span class="n">config_file</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">figure</span> <span class="o">=</span> <span class="n">proj</span><span class="o">.</span><span class="n">plot_svi</span><span class="p">(</span><span class="n">plot_option</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">geopackages</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<figure class="align-default" id="id4">
<a class="reference internal image-reference" href="../_images/complete_plot.png"><img alt="Map showing SVI comparison for 2018 Travis County (factor analysis method versus rank method)" src="../_images/complete_plot.png" style="width: 750.0px; height: 600.0px;" />
</a>
<figcaption>
<p><span class="caption-text">Comparison between factor analysis and rank methods: 2018 Block Group Social Vulnerability Estimate for Travis County</span><a class="headerlink" href="#id4" title="Link to this image">¶</a></p>
</figcaption>
</figure>
</section>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="../apiref/apiref.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">SVInsight</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="../Background/paper.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Papers</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2024, Matthew Preisser
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">User Guide</a><ul>
<li><a class="reference internal" href="#overview">Overview</a></li>
<li><a class="reference internal" href="#initializing-the-project">1. Initializing the Project</a></li>
<li><a class="reference internal" href="#defining-the-initial-project-configuration-variables">2. Defining the Initial Project Configuration Variables</a></li>
<li><a class="reference internal" href="#extracting-the-boundary">3. Extracting the Boundary</a></li>
<li><a class="reference internal" href="#extract-raw-data-and-filling-holes">4. Extract Raw Data and Filling Holes</a></li>
<li><a class="reference internal" href="#configuring-and-calculating-svi">5. Configuring and Calculating SVI</a><ul>
<li><a class="reference internal" href="#configure-variables">Configure Variables</a></li>
<li><a class="reference internal" href="#calculate-svi">Calculate  SVI</a></li>
</ul>
</li>
<li><a class="reference internal" href="#examine-variables">6. Examine Variables</a></li>
<li><a class="reference internal" href="#customizing-variables">7. Customizing Variables</a></li>
<li><a class="reference internal" href="#plotting">8. Plotting</a><ul>
<li><a class="reference internal" href="#plot-option-1-single-percentile">Plot option 1: Single percentile</a></li>
<li><a class="reference internal" href="#plot-option-2-double-percentile">Plot option 2: Double percentile</a></li>
<li><a class="reference internal" href="#plot-option-3-full-comparison">Plot option 3: Full comparison</a></li>
</ul>
</li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/scripts/furo.js?v=5fa4622c"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    </body>
</html>